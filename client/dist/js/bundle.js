!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./client/src/bundles/bundle.js")}({"./client/src/boot/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(6),o=(r(i),n("./client/src/boot/registerReducers.js")),a=r(o),l=n("./client/src/boot/registerComponents.js"),c=r(l),u=n("./client/src/boot/registerQueries.js"),s=r(u);document.addEventListener("DOMContentLoaded",function(){(0,c.default)(),(0,s.default)(),(0,a.default)()})},"./client/src/boot/registerComponents.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(i),a=n("./client/src/components/LinkPicker/LinkPicker.js"),l=r(a),c=n("./client/src/components/LinkField/LinkField.js"),u=r(c),s=n("./client/src/components/LinkModal/LinkModal.js"),d=r(s),f=n("./client/src/components/LinkModal/FileLinkModal.js"),p=r(f),y=function(){o.default.component.registerMany({LinkPicker:l.default,LinkField:u.default,"LinkModal.FormBuilderModal":d.default,"LinkModal.InsertMediaModal":p.default})};t.default=y},"./client/src/boot/registerQueries.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(i),a=n("./client/src/state/linkTypes/readLinkTypes.js"),l=r(a),c=n("./client/src/state/linkDescription/readLinkDescription.js"),u=r(c),s=function(){o.default.query.register("readLinkTypes",l.default),o.default.query.register("readLinkDescription",u.default)};t.default=s},"./client/src/boot/registerReducers.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=(function(e){e&&e.__esModule}(r),n(8),function(){});t.default=i},"./client/src/bundles/bundle.js":function(e,t,n){"use strict";n("./client/src/boot/index.js"),n("./client/src/entwine/JsonField.js")},"./client/src/components/LinkField/LinkField.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(3),c=(r(l),n(1)),u=r(c),s=(n(7),n(8)),d=n(13),f=n(0),p=n(9),y=r(p),k=n(2),m=(r(k),function(e){var t=e.id,n=e.loading,r=e.Loading,o=e.data,l=e.LinkPicker,s=e.onChange,d=e.types,p=e.linkDescription;if(i(e,["id","loading","Loading","data","LinkPicker","onChange","types","linkDescription"]),n)return u.default.createElement(r,null);var y=(0,c.useState)(!1),k=a(y,2),m=k[0],v=k[1],g=(0,c.useState)(""),_=a(g,2),h=_[0],j=_[1],L=function(e){"function"==typeof s&&s(e,{id:t,value:{}})},b=o.typeKey,O=d[b],M=h?d[h]:O,P={title:o?o.Title:"",link:O?{type:O,title:o.Title,description:p}:void 0,onEdit:function(){v(!0)},onClear:L,onSelect:function(e){j(e),v(!0)},types:Object.values(d)},E=function(e,n,r){console.dir({data:e,action:n,submitFn:r,onChange:s});var o=(e.SecurityID,e.action_insert,i(e,["SecurityID","action_insert"]));return"function"==typeof s&&s(event,{id:t,value:o}),v(!1),j(""),Promise.resolve()},C={type:M,editing:m,onSubmit:E,onClosed:function(){v(!1)},data:o},T=M?M.handlerName:"FormBuilderModal",S=(0,f.loadComponent)("LinkModal."+T);return u.default.createElement(c.Fragment,null,u.default.createElement(l,P),u.default.createElement(S,C))}),v=function(e){return function(t){var n=t.data,r=t.value,a=i(t,["data","value"]),l=r||n;return"string"==typeof l&&(l=JSON.parse(l)),u.default.createElement(e,o({dataStr:JSON.stringify(l)},a,{data:l}))}};t.default=(0,s.compose)((0,f.inject)(["LinkPicker","Loading"]),(0,f.injectGraphql)("readLinkTypes"),v,(0,f.injectGraphql)("readLinkDescription"),d.withApollo,y.default)(m)},"./client/src/components/LinkModal/FileLinkModal.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(){return{}}function a(e){return{actions:{initModal:function(){return e({type:"INIT_FORM_SCHEMA_STACK",payload:{formSchema:{type:"insert-link",nextType:"admin"}}})},reset:function(){return e({type:"RESET"})}}}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=n(3),u=(r(c),n(1)),s=r(u),d=n(11),f=r(d),p=n(7),y=function(e){var t=e.type,n=e.editing,r=e.data,o=e.actions,a=e.onSubmit,c=i(e,["type","editing","data","actions","onSubmit"]);if(!t)return!1;(0,u.useEffect)(function(){n?o.initModal():o.reset()},[n]);var d=r?{ID:r.FileID,Description:r.Title,TargetBlank:!!r.OpenInNew}:{},p=function(e){var n=e.ID,r=e.Description,i=e.TargetBlank;return a({FileID:n,Title:r,OpenInNew:i,typeKey:t.key},"",function(){})};return s.default.createElement(f.default,l({isOpen:n,type:"insert-link",title:!1,bodyClassName:"modal__dialog",className:"insert-link__dialog-wrapper--internal",fileAttributes:d,onInsert:p},c))};t.default=(0,p.connect)(o,a)(y)},"./client/src/components/LinkModal/LinkModal.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(3),l=(r(a),n(1)),c=r(l),u=n(2),s=(r(u),n(10)),d=r(s),f=n(12),p=r(f),y=n(16),k=r(y),m=n(6),v=r(m),g=function(e,t){var n=v.default.getSection("SilverStripe\\Admin\\LeftAndMain").form.DynamicLink.schemaUrl,r=p.default.parse(n),i=k.default.parse(r.query);return i.key=e,t&&(i.data=JSON.stringify(t)),p.default.format(o({},r,{search:k.default.stringify(i)}))},_=function(e){var t=e.type,n=e.editing,r=e.data,a=i(e,["type","editing","data"]);return!!t&&c.default.createElement(d.default,o({title:t.title,isOpen:n,schemaUrl:g(t.key,r),identifier:"Link.EditingLinkInfo"},a))};t.default=_},"./client/src/components/LinkPicker/LinkPicker.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=(r(o),n(1)),l=r(a),c=(n(0),n(2)),u=r(c),s=(n(4),n(5)),d=r(s),f=n("./client/src/components/LinkPicker/LinkPickerMenu.js"),p=r(f),y=n("./client/src/components/LinkPicker/LinkPickerTitle.js"),k=r(y),m=n("./client/src/types/LinkType.js"),v=(r(m),function(e){var t=e.types,n=e.onSelect,r=e.link,o=e.onEdit,a=e.onClear;return l.default.createElement("div",{className:(0,d.default)("link-picker","form-control",{"link-picker--selected":r})},void 0===r&&l.default.createElement(p.default,{types:t,onSelect:n}),r&&l.default.createElement(k.default,i({},r,{onClear:a,onClick:function(){return r&&o&&o(r)}})))});v.propTypes=i({},p.default.propTypes,{link:u.default.shape(k.default.propTypes),onEdit:u.default.func,onClear:u.default.func}),t.Component=v,t.default=v},"./client/src/components/LinkPicker/LinkPickerMenu.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(3),a=r(o),l=n(1),c=r(l),u=(n(0),n(2)),s=r(u),d=n(4),f=n(5),p=(r(f),n("./client/src/types/LinkType.js")),y=r(p),k=function(e){var t=e.types,n=e.onSelect,r=(0,l.useState)(!1),o=i(r,2),u=o[0],s=o[1],f=function(){return s(function(e){return!e})};return c.default.createElement(d.Dropdown,{isOpen:u,toggle:f,className:"link-picker__menu"},c.default.createElement(d.DropdownToggle,{className:"link-picker__menu-toggle font-icon-link",caret:!0},a.default._t("Link.ADD_LINK","Add Link")),c.default.createElement(d.DropdownMenu,null,t.map(function(e){var t=e.key,r=e.title;return c.default.createElement(d.DropdownItem,{key:t,onClick:function(){return n(t)}},r)})))};k.propTypes={types:s.default.arrayOf(y.default).isRequired,onSelect:s.default.func.isRequired},t.default=k},"./client/src/components/LinkPicker/LinkPickerTitle.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=r(i),a=n(1),l=r(a),c=(n(0),n(2)),u=r(c),s=n(5),d=(r(s),n("./client/src/types/LinkType.js")),f=r(d),p=n(4),y=function(e){return function(t){console.log("trying to stop propagation"),t.nativeEvent.stopImmediatePropagation(),t.preventDefault(),t.nativeEvent.preventDefault(),t.stopPropagation(),e&&e()}},k=function(e){var t=e.title,n=e.type,r=e.description,i=e.onClear,a=e.onClick;return l.default.createElement(p.Button,{className:"link-picker__link font-icon-link",color:"secondary",onClick:y(a)},l.default.createElement("div",{className:"link-picker__link-detail"},l.default.createElement("div",{className:"link-picker__title"},t),l.default.createElement("small",{className:"link-picker__type"},n.title,": ",l.default.createElement("span",{className:"link-picker__url"},r))),l.default.createElement(p.Button,{className:"link-picker__clear",color:"link",onClick:y(i)},o.default._t("Link.CLEAR","Clear")))};k.propTypes={title:u.default.string.isRequired,type:f.default,description:u.default.string,onClear:u.default.func,onClick:u.default.func},t.default=k},"./client/src/entwine/JsonField.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(15),a=r(o),l=n(1),c=r(l),u=n(14),s=r(u),d=n(0);a.default.entwine("ss",function(e){e(".js-injector-boot .entwine-jsonfield").entwine({Component:null,onmatch:function(){var e=this.closest(".cms-content").attr("id"),t=e?{context:e}:{},n=this.data("schema-component"),r=(0,d.loadComponent)(n,t);this.setComponent(r),this._super(),this.refresh()},refresh:function(){var e=this.getProps(),t=this.getComponent();s.default.render(c.default.createElement(t,i({},e,{noHolder:!0})),this[0])},handleChange:function(t,n){var r=(n.id,n.value),i=e(this).data("field-id");e("#"+i).val(JSON.stringify(r)).trigger("change"),this.refresh()},getProps:function(){var t=e(this).data("field-id"),n=e("#"+t).val();return{id:t,value:n?JSON.parse(n):void 0,onChange:this.handleChange.bind(this)}},onunmatch:function(){s.default.unmountComponentAtNode(this[0])}})})},"./client/src/state/linkDescription/readLinkDescription.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i={props:function(e){var t=e.data,n=t.error,r=t.readLinkDescription,i=t.loading,o=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:i,linkDescription:r?r.description:"",graphQLErrors:o}}},o=r.graphqlTemplates.READ,a={apolloConfig:i,templateName:o,pluralName:"LinkDescription",pagination:!1,params:{dataStr:"String!"},args:{root:{dataStr:"dataStr"}},fields:["description"]};t.default=a},"./client/src/state/linkTypes/readLinkTypes.js":function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),a={props:function(e){var t=e.data,n=t.error,o=t.readLinkTypes,a=t.loading,l=n&&n.graphQLErrors&&n.graphQLErrors.map(function(e){return e.message});return{loading:a,types:o?o.reduce(function(e,t){return i({},e,r({},t.key,t))},{}):{},graphQLErrors:l}}},l=o.graphqlTemplates.READ,c={apolloConfig:a,templateName:l,pluralName:"LinkTypes",pagination:!1,params:{keys:"[ID]"},args:{root:{keys:"keys"}},fields:["key","title","handlerName"]};t.default=c},"./client/src/types/LinkType.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.shape({key:i.default.string.isRequired,title:i.default.string.isRequired});t.default=o},0:function(e,t){e.exports=Injector},1:function(e,t){e.exports=React},10:function(e,t){e.exports=FormBuilderModal},11:function(e,t){e.exports=InsertMediaModal},12:function(e,t){e.exports=NodeUrl},13:function(e,t){e.exports=ReactApollo},14:function(e,t){e.exports=ReactDom},15:function(e,t){e.exports=jQuery},16:function(e,t){e.exports=qs},2:function(e,t){e.exports=PropTypes},3:function(e,t){e.exports=i18n},4:function(e,t){e.exports=Reactstrap},5:function(e,t){e.exports=classnames},6:function(e,t){e.exports=Config},7:function(e,t){e.exports=ReactRedux},8:function(e,t){e.exports=Redux},9:function(e,t){e.exports=FieldHolder}});